#!/bin/bash
# keepassxc-cli
db=$(realpath ~/secure/Passwords.kdbx )

chk-passxc-db() {
    if [ -f $db ]; then
        return 0
    else
        return 1
    fi
}

passxc-clip() {
    chk-passxc-db
    if [[ $? == 0 ]];then
        keepassxc-cli clip "$db" $@ 0
    else
        echo no valid db
        return 1
    fi
}

passxc-search() {
    chk-passxc-db
    if [[ $? == 0 ]];then
        keepassxc-cli search "$db" $@
    else
        echo no valid db
        return 1
    fi
}

passxc-show() {
    chk-passxc-db
    if [[ $? == 0 ]];then
        keepassxc-cli show -s "$db" $@
    else
        echo no valid db
        return 1
    fi
}

passxc() {
    case "$1" in
        'clip') passxc-clip "$2";;
        'search') passxc-search "$2";;
        'show') passxc-show "$2";;
        *) echo invalid command;;
    esac
}
